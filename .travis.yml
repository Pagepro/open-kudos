language: node_js
node_js:
- '12'
env:
  global:
  - secure: d27p0GL8rVNfpzVClD3oj1sEScil2UGcspqjyGZDrG+vX5ks8W4jVL25AyGKDfYLeeOPy06Z4GyoCSoDFiP6TgdxT6uZpECV94qOtwX2UL/+I2XHTCPESij6g7O98vYR9L9teXHCg0u+no3/904/dE06+IIJK6bJsz0dQUVtTrCEYOOmsmqUMX6IlMUWKhaWeh1Gl2Yzh2RScLBdXE0Poue81h84SsxCxbO0LYt4+mQlcT0uEbFJeDNDKUdcMTwnGgbas7fY95l9twXCgroPc8WHf259PQM1Ic1JQW3sitiQnrOyzmevSBQnphzT7Vvr4Gmce2cCAxxJYLyD3feL2RQfZ5OcWys0lJEIZz2IBWIr08JZUNmunse7Xco8+Ayk+l3As7zziQrs75QrcD/Xq+PAAm9Oy+/SQ1e2Sqh8u+/t/HqSFnM2hIGo3RmZ6QldriF5+j5UEdiLt6vad6qv4uckvRRSN9h2cYy17eTkyPzclPKC4g+lF1wOobG5HwY9gIX4+MBFX3BpWpmhnxzUx8sf2N7FH56FInFUOpUqNp66w5RT4bPqVMx9ryPyM2xOmWFlfpgy3SoXoVmJ627jyNyIoQPI/u2XfgM0tVVC66CacebIL/YXmhuvJhenrmPjatJDYdsST9dhBHZT+RLhGvFXLK5Kn/6eEi0pzzwgm0s=
  - secure: pLO1sfLWqTwEgwQmEvUCTu5BtfL6XGH4bX5vADleuDRaLKrv3kL4c9pQ/fWsFNloPEf3eAHPAs6C+o2L9e07/ssVcGQtyfaj7cnWkABzQngDpPOg8EJu1DkL3aotEz7a9kCUizebTnBA+14d7rO3nQdeIzzMATO8aMu7IQzI9RCJ7xB7/5bIblSFyCjnDElvAj2PCP6aYFDeZaL2HJZ1h3iljPZ71CKnuBw/uc2DkLW5EeMW9LEGYCeUN/NFMBnG7NG5eSSU1RByJamlAP5pQ7r0jfYsG2XWIFhVAP7XCPITssNaMd9XSKwMUORv2O57VeCg6JyVKZl7n+UfM7ODRc2qp8dBsIpiHPQbu1mE4DcbjqdI3SxXfd2EY+qsU5z9b/urhBCuP4V87+sXm/sWFN6nRi77DaPLJAZIFqPluT8REsf/Bb7zgJNV+1j3v2Bj2OFMoOvez7dg5wbdxhX23Ru6fIbT0PfNGL/Nh5ziA7EqsIPYQ5/ZR0bh8h9+KESlyPEkFKxxTBATcCc1+sQgY9JrTMowXUhSLN2ZWGBHpUSr4Dg7kCSk94dDva96hGtUkeokkSQ+cIuFufUZrAhpDdpZJ6Ch633yXPoDuF2UxVgWqQyyz7dKdQhBmAK58PbrZBg1Rlln6WzWpx+5isNSBCaLSQBmJGP1EuABe6kDj/k=
  - secure: gZzeWc8SlQHHQIJcudH8dHpU5w6jPsPCLot36YINmfP/+TMXfGG4qmLi/G9RFm191nI2+mAI5AYMkDNB8diQewrMRjh5y5YNiXBjguBaxpH0bNOKPnz6O+0rq4h0Nto/8MpNGFclG2+rW35Tyz4R14Ant8yyIAbKwvwPB7bD26ukpzdqu6zYvMAlr1SFMvMKk+l56q40N18JlkvWyUxCWvNzOMoeLcZ2PCn4Ul10uyIyoFOGo74yULOeqsI3H4vvJJZJHra6kU/Ddw3ECgTa2FUnrKjOyI6plcuJ0DwANZImVDqjeOYKZV4IFi2qB5cG/ARfexOFmWcAIEYgkSSQpZOrK58N9IHvyWEleKcnU+/Pgpjj9HMmWJOQKGIu++dW9GZ7Z/Fxe2lZlpRKGMw9mAa3KH61RHR6neVoIBjw1wwWN7phHRDrhxWHsGQ1LMFpWgj6zYfKDJJKM6pFS/a8CgDOcW6AiZQMsSd37y8zQijHgoS8XbxfNWY7aNlxZmJYcQ699yrhWsbnJ6c3wRvbSnyr/8qkb0mk6JuNKqSV8NBfvqGlYQT2DJdvlSPpA20fRMVSaH8v9+QuEBgTx5ms/2mWdC/NCvH2NV4GmthfujKvKPKt7S3r2XTcgrvXYS27Sesn3CtQSz63ysm+UFK1OcKhAG7F/kgv4irHz3BcoCg=
  - secure: FcTTD79ZnFeQyC9JINsS23/PhdCc7Hx8pHUUnMVRs7bFM3mzdmrA8hbFOCsuxYr520hU6OdasiBRTe1BXCeHLBVRQnR71dM97UD2CIh8Ks+eUVspzHCbKsC+YsoLjNlU8Ww9THe4nR1Dxgr+TEyp7QLs3eytHALZ1RBdzolbSduZePgWjf6jFrftrPA44jjLYiwudcpT1snYTWuufN5a5PiSgjJwP9y7tLTlRS7ac5Zh/HkE7t/b77mspU1l+5TU3M8CI++d4ebQciyPiBnZ2xvr92OTBo+/SxEmahWai57QY7tfJKjthNCKgYG3d0ek36kWvn2Swi8MbspjpJav0xQ/zgYjs+V12z+EogfjqKbUbbi6GOsuQgJhRZTctW2L2G8QMzJod8+OTW0aBxeKg7Ek90jDe4Ourq3jLT9/80hKnLEUIjIKmcHhmnnaNYcOOqNMGVxDtH5BbU8GhObxRrBmyW7E66IgtSEOypqcBOWSunwbxc5yP/hE4kxVzwJc+w775xKfiLWCCXrUKFs2QQldw/ldlXrcrYTYGoMaHphXeXiHEsGd8r1atkiE13LdHK27EHLdqhJaNmC9vWE/LpSM3YpEQwnvgZlPQnaH2qJ7suKEvpJ8K/0N808vTtkoj4lpT2ACyFwZpUPFTx3vsDzcRbPFwb02xgzkQoC0ErI=
install:
  - yarn global add codecov
jobs:
  include:
  - stage: build:client
    script: yarn run build:client
  - stage: build:backend
    script: yarn run build:backend
  - stage: test
    script: yarn run test:backend
  - stage: semantic-release
    script: yarn && yarn run semantic-release
after_success:
- yarn run codecov:backend
